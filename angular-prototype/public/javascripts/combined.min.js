
// Evaluated by gulp

angular.module("scorer",["ui.router","ngResource"]).config(function(t,r){"use strict";r.otherwise("/"),t.state("scorer",{url:"/",views:{content:{templateUrl:"main.htm",controller:"ScorerController"}}}).state("others",{url:"/others",views:{content:{templateUrl:"others.htm",controller:"OthersController"}}}).state("settings",{url:"/settings",views:{content:{templateUrl:"settings.htm",controller:"SettingsController"}}})}),angular.module("scorer").controller("ScorerController",["$scope","$stateParams","$state","Scoreboard",function(t,r,e,s){"use strict";var o=s;t.scoreboard=o.scoreboard,t.board=o,t.go_others=function(){e.go("others")}}]).controller("OthersController",["$scope","$stateParams","$state","Scoreboard",function(t,r,e,s){var o=s,a=function(t){this.type=t,this.runs=0,this.extras=0,this.is_clean=function(){return 0==this.runs&&0==this.extras},this.runs_up=function(){this.runs+=1},this.runs_down=function(){this.runs>0&&(this.runs-=1)},this.extras_up=function(){this.extras+=1},this.extras_down=function(){this.extras>0&&(this.extras-=1)},this.add=function(){o.add_extra(this)}};t.extras={},t.extras.no_ball=new a("no_ball"),t.extras.wide=new a("wide"),t.extras.bye=new a("bye"),t.extras.leg_bye=new a("leg_bye"),t.run_out_striker_runs=0,t.run_out_striker_extras=0,t.run_out_non_striker_runs=0,t.run_out_non_striker_extras=0,t.accept=function(){var r,s=0;for(var o in t.extras)t.extras[o].is_clean()||(s+=1,r=t.extras[o]);return s>1?(alert("Please enter just one type of extra."),!1):0==s?(alert("Nothing has been entered."),!1):(r.add(),void e.go("scorer"))},t.reject=function(){e.go("scorer")}}]).controller("SettingsController",["$scope","$stateParams","$state","Scoreboard","Storage",function(t,r,e,s,o){var a=o.get("settings");a||(a={match_type:{id:1,name:"Limited Overs"},match_types:[{id:1,name:"Limited Overs"},{id:2,name:"Timed"},{id:3,name:"Pairs"}],num_overs:40,num_innings:1,home_team:{id:1,name:"England"},away_team:{id:2,name:"Australia"},team_batting_first:{id:1,name:"England"}}),t.settings=a,t.accept=function(){o.put("settings",t.settings),e.go("scorer")},t.reject=function(){e.go("scorer")},$("#navbar").collapse("hide")}]),angular.module("scorer").factory("Scoreboard",["Storage",function(t){var r=function(){this.no=0,this.striker=!1,this.runs=0},e=t.get_scoreboard();e||(e={total:259,wickets:5,extras:3,last_innings:302,overs:35,balls:0,overs_and_balls:35,left_bat:{no:3,striker:!1,runs:53},right_bat:{no:7,striker:!0,runs:20},game_over:!1,extras:0});var s={scoreboard:e,change_ends:function(t){return t%2==0||void(1==this.scoreboard.left_bat.striker?(this.scoreboard.left_bat.striker=!1,this.scoreboard.right_bat.striker=!0):(this.scoreboard.left_bat.striker=!0,this.scoreboard.right_bat.striker=!1))},alert_game_over:function(){return 1==this.scoreboard.game_over&&(alert("The innings is over!"),!0)},bowls:function(t,r){if(this.alert_game_over())return!1;switch(t){case"wicket":this.wicket();break;case"bye":case"leg_bye":this.scoreboard.balls+=1,this.change_ends(1);case"no_ball":case"wide":this.scoreboard.extras+=1,this.scoreboard.total+=1;break;case"ball":this.ball(r),this.change_ends(r)}this.over(),this.set_game_over(),this.save()},set_game_over:function(){return this.scoreboard.last_innings>0&&this.scoreboard.total>this.scoreboard.last_innings&&(this.scoreboard.game_over=!0),this.scoreboard.wickets>=10&&(this.scoreboard.game_over=!0),this.scoreboard.game_over},over:function(){this.scoreboard.balls>=6?(this.scoreboard.balls=0,this.scoreboard.overs+=1,this.scoreboard.overs_and_balls=this.scoreboard.overs,this.change_ends()):this.scoreboard.overs_and_balls=this.scoreboard.overs+"."+this.scoreboard.balls},add_runs_to_striker:function(t){this.scoreboard.left_bat.striker?this.scoreboard.left_bat.runs+=t:this.scoreboard.right_bat.runs+=t},ball:function(t){this.scoreboard.total+=t,this.scoreboard.balls++,this.add_runs_to_striker(t)},wicket:function(){if(this.scoreboard.balls++,this.scoreboard.wickets+=1,this.set_game_over())return!0;var t=this.scoreboard.left_bat.no>this.scoreboard.right_bat.no?this.scoreboard.left_bat.no+1:this.scoreboard.right_bat.no+1;1==this.scoreboard.left_bat.striker?(this.scoreboard.left_bat=new r,this.scoreboard.left_bat.no=t,this.scoreboard.left_bat.striker=!0):(this.scoreboard.right_bat=new r,this.scoreboard.right_bat.no=t,this.scoreboard.right_bat.striker=!0),this.save()},add_extra:function(t){return!this.alert_game_over()&&(this.add_extras[t.type](this,t),this.set_game_over(),void this.save())},add_extras:{no_ball:function(t,r){t.scoreboard.total+=r.runs+r.extras,t.add_runs_to_striker(r.runs),t.change_ends(r.runs+r.extras-1)},wide:function(t,r){t.scoreboard.total+=r.extras,r.extras>1&&t.change_ends(r.extras-1)},leg_bye:function(t,r){t.scoreboard.balls++,t.scoreboard.total+=r.extras,t.change_ends(r.extras),t.over()},bye:function(t,r){t.scoreboard.balls++,t.scoreboard.total+=r.extras,t.change_ends(r.extras),t.over()}},save:function(){t.put_scoreboard(this.scoreboard)}};return s}]).factory("Storage",function(){return{get_scoreboard:function(){return this.get("scoreboard")},put_scoreboard:function(t){return this.put("scoreboard",t),!0},get:function(t){var r;try{return r=JSON.parse(sessionStorage[t])}catch(t){return!1}},put:function(t,r){return sessionStorage[t]=JSON.stringify(r),!0}}});